# LiveMate - ver2.0

**ライブ同行者募集掲示板**

[https://livemate.vercel.app/](https://livemate.vercel.app/)

## 📖 開発背景

過去に私がライブアイドルとして活動していた際、ファンの方々から **「一人でライブに行くのが心細い」** という声をいただくことがありました。
そうした悩みを持つファンの方々が、気軽に一緒にライブに行ける人を見つけられる場所を作りたいと思い、この掲示板を開発しました。

また、自身のエンジニアリング学習として、DBを有したWebアプリ開発の一連の流れ（フロントエンド・バックエンド・DB連携）への理解を深めることを目的としています。

## 📝 概要

イベントに同行したい人を募集するための、シンプルな投稿・閲覧アプリです。
ユーザー登録やログイン機能を設けず、誰でも手軽に利用できる設計にしています。

### 主な機能
- **投稿の作成**：同行者を募集する投稿を行えます。
- **一覧表示**：新しい投稿が上に表示される時系列順で閲覧できます。
- **投稿の削除**：ログイン機能の代わりに「削除トークン」を使用し、投稿者本人のみが削除できる仕組みを採用しています。

## 🛠 使用技術

| Category | Tech Stack |
| --- | --- |
| **Frontend** | Next.js, TypeScript |
| **Backend** | Node.js |
| **Database** | Supabase |
| **Deployment** | Vercel |

## 💡 技術的なポイントとこだわり

### 1. 削除トークンによる簡易認証（ログインレス）
ログイン機能を実装せずに、「自分だけが自分の投稿を削除できる」仕組みを実現しました。

- **仕組み**:
    - 投稿作成時にランダムなトークンを生成。
    - **クライアント側**：平文のトークンをユーザーに提示。
    - **データベース側**：ハッシュ化したトークンのみを保存。
    - 削除リクエスト時に、入力されたトークンをハッシュ化して照合することで、サーバー側に平文を持たせない設計にしています。

- **実装の工夫**:
    ```javascript
    crypto.randomBytes(2).toString("hex");
    ```
    人間が手動でコピペしやすい短さと、十分なランダム性のバランスを考慮し、上記の実装を採用しました。

### 2. UI/UXの改善
- **日付選択の制御**:
    ライブの日時を指定するカレンダー入力において、**今日以前の日付（過去の日付）は選択不可**に設定し、誤入力を防ぐ仕様にしました。
- **X (旧Twitter) IDの正規化**:
    連絡手段としてXのユーザーネームを入力してもらいますが、三項演算子を用いて「@の有無」に関わらず、データベースには統一された形式（@あり）で保存されるように処理しています。
- **バリデーション**:
    フォームに適宜バリデーションを設け、不正な値や空データが送信されないように制御しています。

### 3. X（旧Twitter）への共有機能
投稿作成後、その内容を **Xの投稿画面に下書き付きで共有できる機能**を実装しました。  
`intent/tweet` を利用することで、投稿内容（ライブ名・日付・会場・ひとこと）を自動で整形し、ユーザー操作で安全に拡散できる設計にしています。

日本語や改行を含むテキストでも問題なく共有できるよう、`URLSearchParams` を用いてURLエンコードを行っています。


## 📚 学習目的

本開発は以下の技術的理解を深めることを重視しました。

*   **HTTPメソッドの理解**: GET / POST / DELETE の適切な使い分け。
*   **責務の分離**: フロントエンドとバックエンドの役割分担の明確化。
*   **通信フローの把握**: 「ボタンを押すと裏で何が起きているのか」を言語化できる状態を目指しました。
    *   ブラウザのNetworkタブやAPI Routeの処理を追いながらデバッグを行い、リクエストとレスポンスの流れを理解しました。

## 🚀 今後の改善予定

*   認証機能（ログイン）を導入した別バージョンの検討
*   ライブカレンダーと連携したライブ情報詳細確認機能
*   メディアとしての拡張
*   その他関連アプリケーションを作成しプラットフォーム化
*   広告枠の実装
*   トラブル防止のための年齢認証機能
